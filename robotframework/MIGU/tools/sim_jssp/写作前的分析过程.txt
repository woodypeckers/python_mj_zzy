２０１６.７.１２　带数据支撑的模拟器的写作过程

周一下班前拿到了一份接口文档，据周志文的描述来看，未来可能还会发生改变
周一和志文沟通，如果用ＲＦ驱动，直接就可以引用SimServer,　志文的说法，时间短，估计无法完全用ＲＦ来实现驱动，所以建议改一个手工测试的模拟器
预期本周需要完成这个模拟器，后续有改动，组内再自己改

步骤１：接口类型分析
    接口文档来看，请求包格式未定，但根据返回包为utf-8的json判断，估计请求包也是json结构；
    如果请求包不是json结构，则可能是在post包体中以&来区别的key=value串来带参数（目前暂时先不考虑这一点）
    
步骤２：接口数据模型
    从和周志文的沟通来看，其实这个模拟器还是需要有自己的数据模型的，我们从接口文档可以看出什么呢？
    １实时账单接口
        bill表
       请求参数中居然有分页的参数，这是不是意味着数据可能是以group方式的返回？
     　主键是什么（sett_id, 起始时间，结束时间），如果涉及Ｎ多个月，则会有Ｎ多数据回
     　分页是做什么用的？例如总共有１２个月的列表，分页叁数是否可以要求多次返回？　但http是一进一出的，也就是说如果要请求第二次，得发第二次请求
     这个东东一张表就搞定了，叫bill吧，除了page_current和page_size,请求和响应的字段都放里面
    ２暂停信息获取接口，
    　　这个东东再做一张表，pause_info, 包含了settl_id, pause_type, comment,以及sett_month，recovery_month
    ３实时账单明细接口
        bill_detail表 , 单独做一张表，使用settl_id和月份sett_month与jssp表关联，　里面有一堆看不懂的数据
    ４实时账单话费类接口
        bill_detail表中增加Hf字段（实际已经有了）
    ５实时账单非话费类接口
        bill_detail表中增加Fhf字段（实际已经有了）
    6 时账单代理收入接口
        bill_detail表中增加Dl字段（实际已经有了）
    这样，表如下：
    Bill（账单表），Bill表中有大量的数据可以做分组
    Pause_Info (暂停信息表）
    Bill_Detail (账单明细表)，详单的内容，用于多个接口
    
步骤３：逻辑实现
    逻辑越少越好，数据完全由数据库的内容决定
    ６个接口，分别写６个handler，无非是查出数据，编码，组成包返回而已。　没有查到则返回出错的包体。
    由于以前写MCP的模拟器，tornado的url分发直接配就成了，所以无非几个handler预留处理post参数的问题
    每个handler里面调modle层中，查到数据组包返回就ＯＫ了，　测试人员要改的话，也只需要改数据库的内容
    